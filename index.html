<!DOCTYPE html>
<html lang="en">
<head><!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '904521192441941');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=904521192441941&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QB Agency Payment</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat',sans-serif}

body{
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:url("https://img.freepik.com/premium-photo/luxury-abstract-purple-white-wave-background-ai-generated-image_377307-1529.jpg") center/cover no-repeat;
    position:relative;
}
body::after{
    content:"";
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.45);
}

.card{
    width:420px;
    background:#fff;
    border-radius:16px;
    padding:20px;
    z-index:2;
    animation:fade .35s ease;
}
@keyframes fade{from{opacity:0;transform:translateY(20px)}to{opacity:1}}

.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.header h2{font-size:18px;font-weight:800;color:#2b2b2f}
.close{
    font-size:20px;
    cursor:pointer;
    color:#888;
}

.note{
    margin:10px 0 15px;
    font-size:13px;
    text-align:center;
    color:#666;
}

.input-wrap{
    background:#f2f2f2;
    padding:8px;
    border-radius:30px;
}
.input-wrap input{
    width:100%;
    border:none;
    outline:none;
    padding:10px 15px;
    border-radius:30px;
    font-size:13px;
}

.error,.success{
    font-size:12px;
    text-align:center;
    margin-top:5px;
    display:none;
}
.error{color:#e74c3c}
.success{color:#2ecc71}

.tabs{
    margin:18px 0;
    background:#ececec;
    border-radius:10px;
    display:flex;
    position:relative;
}
.tab{
    flex:1;
    padding:8px;
    border:none;
    background:none;
    font-size:13px;
    font-weight:600;
    cursor:pointer;
    z-index:2;
}
.tab.active{color:#000}
.indicator{
    position:absolute;
    width:50%;
    height:100%;
    background:#fff;
    border-radius:10px;
    transition:.25s;
}

.details{
    background:#f7f7f7;
    border-radius:12px;
    padding:15px;
    font-size:13px;
}
.details span{font-weight:700;color:#6f42c1}

.footer{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:18px;
}
.price{font-size:26px;font-weight:800}
.btn{
    background:#000;
    color:#fff;
    border:none;
    padding:10px 20px;
    border-radius:30px;
    font-size:13px;
    font-weight:700;
    cursor:pointer;
}

.qr{
    display:none;
    flex-direction:column;
    align-items:center;
    gap:15px;
    margin-top:20px;
}
.qr img{width:200px;border-radius:12px}
.count{font-size:13px;color:#0088cc}
</style>
</head>

<body>

<div class="card">

    <div class="header">
        <h2>QB Agency Payment</h2>
        <span class="close" onclick="location.href='/QBagency05'">✕</span>
    </div>

    <p class="note">After successful payment, we'll contact you on Telegram within 24 hours</p>

    <div class="input-wrap" id="inputWrap">
        <input
            id="username"
            placeholder="Telegram Username"
            enterkeyhint="go"
            inputmode="text"
            autocomplete="off"
        >
    </div>

    <div class="error" id="err">
        Plz Check , This Username not found
    </div>
    <div class="success" id="ok">✓ Username accepted</div>

    <div class="tabs" id="tabs">
        <div class="indicator" id="indicator"></div>
        <button class="tab active" data-price="20000">Full Pay ₹20,000</button>
        <button class="tab" data-price="10000">Half Pay ₹10,000</button>
    </div>

    <div class="details">
        VERIFICATION DETAILS<br><br>
        Telegram User: <span id="show">Not provided</span><br>
        Agree to Terms & Conditions
    </div>

    <div class="footer">
        <div class="price">₹<span id="amt">20,000</span>/mo</div>
        <button class="btn" onclick="pay()">PROCEED TO PAY</button>
    </div>

    <div class="qr" id="qrBox">
        <img id="qrImg">
        <div class="count">Opening UPI…</div>
    </div>

</div>

<script>
let price = 20000;
let user = "";

const tgRegex = /^[a-zA-Z0-9_]{3,}$/;

/* TAB LOGIC */
document.querySelectorAll('.tab').forEach((t,i)=>{
    t.onclick=()=>{
        document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
        t.classList.add('active');
        indicator.style.left = i===0 ? "0%" : "50%";
        price = t.dataset.price;
        amt.innerText = Number(price).toLocaleString('en-IN');
    }
});

/* USERNAME VALIDATION */
username.addEventListener("input",e=>{
    user = e.target.value.trim();
    if(tgRegex.test(user)){
        err.style.display="none";
        ok.style.display="block";
        show.innerText=user;
    }else{
        err.style.display="block";
        ok.style.display="none";
        show.innerText="Not provided";
    }
});

/* UPI MESSAGE LOGIC */
function makeUPIMsg(u){
    let clean=u.replace(/^@/,"");
    let tags=[];
    for(let i=0;i<clean.length;i++){
        if(clean[i]==="_") tags.push("TG"+(i+1));
    }
    return (tags.join("")+" "+clean.replace(/_/g,"")).trim();
}

/* PAYMENT */
function pay(){
    if(!tgRegex.test(user)){
        err.style.display="block";
        return;
    }

    const msg = makeUPIMsg(user);
    const upi=`upi://pay?pa=yahooo999@apl&pn=QB Agency&am=${price}&tn=${encodeURIComponent(msg)}&cu=INR`;

    qrImg.src=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upi)}`;
    qrBox.style.display="flex";

    /* LOCK INPUT */
    inputWrap.style.display="none";
    tabs.style.pointerEvents="none";

    setTimeout(()=>location.href=upi,2000);
}
</script>

</body>
</html>
